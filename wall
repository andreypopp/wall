#!/usr/bin/env coffee
path      = require 'path'
commander = require 'commander'
makeApp   = require './index'
pkg       = require path.join(__dirname, 'package.json')

commander
  .version(pkg.version)
  .option('-c, --config [config]', 'Configuration file')
  .option('-p, --port  [port]', 'Port to listen on')
  .parse(process.argv)

config = require(commander.config or path.join(__dirname, 'wall.json'))

app = makeApp(config).listen(commander.port or 3004)
